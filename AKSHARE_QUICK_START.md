# AKShare ETF æ•°æ®é›†æˆ - å¿«é€Ÿæ€»ç»“

## âœ… èƒ½å¦é€šè¿‡ AKShare è·å–è¿™äº› ETF æ•°æ®ï¼Ÿ

**ç­”æ¡ˆï¼šæ˜¯çš„ï¼Œå®Œå…¨å¯ä»¥ï¼** âœ“

AKShare åº“å®Œå…¨æ”¯æŒè·å–æ‰€æœ‰ 17 ä¸ª ETF çš„ K çº¿æ•°æ®ã€‚

## ğŸ“Š å·²åˆ›å»ºçš„æ–‡ä»¶å’Œå·¥å…·

### Python è„šæœ¬

| è„šæœ¬ | ç”¨é€” | å‘½ä»¤ |
|------|------|------|
| `scripts/test_akshare.py` | å¿«é€Ÿæµ‹è¯• AKShare | `python3 scripts/test_akshare.py` |
| `scripts/fetch_etf_data.py` | æ‰¹é‡è·å–æ‰€æœ‰ ETF æ•°æ® | `python3 scripts/fetch_etf_data.py` |
| `scripts/import_to_supabase.py` | å¯¼å…¥æ•°æ®åˆ° Supabaseï¼ˆå¾…åˆ›å»ºï¼‰ | `python3 scripts/import_to_supabase.py` |

### Next.js API æ¥å£

| API ç«¯ç‚¹ | è¯´æ˜ |
|---------|------|
| `GET /api/etf/list` | è·å– ETF åˆ—è¡¨ |
| `GET /api/etf/kline?symbol=512050&days=30` | è·å– K çº¿æ•°æ® |

### æ–‡æ¡£

| æ–‡ä»¶ | å†…å®¹ |
|------|------|
| `ETF_DATA_GUIDE.md` | ETF æ•°æ®è·å–æŒ‡å—ï¼ˆè¯¦ç»†æŠ€æœ¯æŒ‡å—ï¼‰ |
| `AKSHARE_IMPLEMENTATION.md` | å®Œæ•´å®æ–½æ­¥éª¤ï¼ˆåŒ…å«æ‰€æœ‰ä»£ç ï¼‰ |

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼‰

### 1ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
pip install akshare pandas
```

### 2ï¸âƒ£ æµ‹è¯•æ•°æ®è·å–

```bash
cd /Users/zhijianhuang/Code/Asset\ Management/asset-management
python3 scripts/test_akshare.py
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
âœ“ æˆåŠŸ: A500ETF
âœ“ æˆåŠŸ: æ’ç”Ÿç§‘æŠ€ETF
âœ“ æˆåŠŸ: æ²ªæ·±300ETF
...
æ€»è®¡: 5/5 ä¸ª ETF å¯ä»¥è·å–æ•°æ®
ğŸ‰ æ‰€æœ‰ ETF éƒ½å¯ä»¥æˆåŠŸè·å–æ•°æ®ï¼
```

### 3ï¸âƒ£ è·å–å…¨éƒ¨æ•°æ®

```bash
python3 scripts/fetch_etf_data.py
```

## ğŸ’¾ æ•°æ®å­˜å‚¨æ–¹æ¡ˆ

### Supabase è¡¨ç»“æ„

**etf_list** (ETF åˆ—è¡¨)
```
- id: UUID
- code: ä»£ç  (å¦‚ 512050)
- name: åç§° (å¦‚ A500ETF)
- category: åˆ†ç±» (stock/commodity)
```

**etf_kline** (K çº¿æ•°æ®)
```
- symbol: ETF ä»£ç 
- date: äº¤æ˜“æ—¥æœŸ
- open: å¼€ç›˜ä»·
- high: æœ€é«˜ä»·
- low: æœ€ä½ä»·
- close: æ”¶ç›˜ä»·
- volume: æˆäº¤é‡
- amount: æˆäº¤é¢
- amplitude: æŒ¯å¹… (%)
- change_percent: æ¶¨è·Œå¹… (%)
```

## ğŸ“ˆ æ”¯æŒçš„ ETFï¼ˆ17 ä¸ªï¼‰

### æŒ‡æ•°ç±»
- **512050** - A500ETF
- **159919** - æ²ªæ·±300ETF
- **159922** - ä¸­è¯500ETF
- **588000** - ç§‘åˆ›50ETF

### ä¸»é¢˜ç±»
- **513130** - æ’ç”Ÿç§‘æŠ€ETF
- **512690** - é…’ETF
- **515790** - å…‰ä¼ETF
- **561910** - ç”µæ± ETF
- **512400** - æœ‰è‰²é‡‘å±ETF

### æµ·å¤–æŒ‡æ•°
- **513100** - çº³æŒ‡ETF
- **513000** - æ—¥ç»225ETF
- **513650** - æ ‡æ™®ETF

### ä½æ³¢åŠ¨ç±»
- **159545** - æ’ç”Ÿçº¢åˆ©ä½æ³¢
- **512890** - çº¢åˆ©ä½æ³¢ETF

### å…¶ä»–
- **160323** - åå¤ç£æ³°LOF
- **159399** - ç°é‡‘æµ
- **159235** - ç°é‡‘æµDC

## ğŸ”§ æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| æ•°æ®æº | AKShare (Python) |
| æ•°æ®åº“ | Supabase (PostgreSQL) |
| åç«¯ | Next.js API Routes |
| å‰ç«¯ | React + TypeScript + Tailwind |
| å›¾è¡¨ | ECharts (æ¨è) æˆ– TradingView Lightweight Charts |

## ğŸ“ ä½¿ç”¨ AKShare çš„å…³é”®è¦ç‚¹

### è·å–å‡½æ•°

```python
import akshare as ak

# è·å– A è‚¡å’Œ ETF æ•°æ®
df = ak.stock_zh_a_hist(
    symbol='512050',           # ETF ä»£ç 
    period='daily',             # å‘¨æœŸ: daily/weekly/monthly
    start_date='20251101',      # å¼€å§‹æ—¥æœŸ YYYYMMDD
    end_date='20251216',        # ç»“æŸæ—¥æœŸ YYYYMMDD
    adjust='qfq'                # å¤æƒæ–¹å¼: qfq(å‰å¤æƒ)/hfq(åå¤æƒ)/none
)
```

### è¿”å›çš„åˆ—

```
æ—¥æœŸ, å¼€ç›˜, æœ€é«˜, æœ€ä½, æ”¶ç›˜, æˆäº¤é‡, æˆäº¤é¢, æŒ¯å¹…, æ¶¨è·Œå¹…
```

### ä¼˜ç‚¹
- âœ“ å®Œå…¨å…è´¹
- âœ“ æ— éœ€ API å¯†é’¥
- âœ“ æ”¯æŒå¤šç§å‘¨æœŸ
- âœ“ æ•°æ®å®æ—¶æ€§å¥½
- âœ“ ç¤¾åŒºæ´»è·ƒï¼Œæ–‡æ¡£å®Œå–„

### ç¼ºç‚¹
- âœ— è·å–é€Ÿåº¦æ…¢ï¼ˆéœ€è¦çˆ¬å–ï¼‰
- âœ— å¯èƒ½å› ç½‘ç»œé—®é¢˜å¤±è´¥
- âœ— é¢‘ç¹è¯·æ±‚å¯èƒ½è¢«é™æµ

## ğŸ”„ æ¨èçš„æ•°æ®æ›´æ–°æµç¨‹

1. **åˆå§‹å¯¼å…¥**
   - ä¸€æ¬¡æ€§è·å–è¿‡å» 90 å¤©çš„æ•°æ®
   - å¯¼å…¥åˆ° Supabase

2. **å®šæœŸæ›´æ–°**
   - ä½¿ç”¨ GitHub Actions å®šæ—¶ä»»åŠ¡
   - æ¯å¤©ä¸‹åˆ 4 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´åˆå¤œï¼‰è¿è¡Œ
   - åªè·å–æœ€æ–°çš„æ•°æ®ï¼Œæ‰§è¡Œ UPSERT æ“ä½œ

3. **å®æ—¶æ˜¾ç¤º**
   - å‰ç«¯é€šè¿‡ API æŸ¥è¯¢ Supabase
   - ECharts å®æ—¶ç»˜åˆ¶ K çº¿å›¾

## ğŸ“š ç›¸å…³èµ„æº

- AKShare æ–‡æ¡£: https://akshare.readthedocs.io/
- ECharts æ–‡æ¡£: https://echarts.apache.org/
- Supabase æ–‡æ¡£: https://supabase.com/docs

## â­ï¸ ä¸‹ä¸€æ­¥

1. âœ… éªŒè¯ AKShare èƒ½è·å–æ•°æ® (ç”¨ test_akshare.py)
2. âœ… åœ¨ Supabase ä¸­åˆ›å»ºæ•°æ®è¡¨
3. â³ å¯¼å…¥æ•°æ®ï¼ˆä½¿ç”¨ import_to_supabase.pyï¼‰
4. â³ é›†æˆ ECharts æ˜¾ç¤º K çº¿å›¾
5. â³ æ·»åŠ æŠ€æœ¯æŒ‡æ ‡ï¼ˆMAã€MACD ç­‰ï¼‰
6. â³ å®ç°å®æ—¶æ•°æ®æ›´æ–°

ç¥ä½ å¼€å‘æ„‰å¿«ï¼ğŸš€
